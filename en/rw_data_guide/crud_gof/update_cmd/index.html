<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.57.2" />
    <meta name="description" content="Akira&#39;s guide for MongoDB">
<meta name="author" content="Akira Kurogane">

    <link rel="icon" href="/mongodb-guide/images/favicon.png" type="image/png">

    <title>The update command :: Akira&#39;s MongoDB Guide</title>

    
    <link href="/mongodb-guide/css/nucleus.css?1574476271" rel="stylesheet">
    <link href="/mongodb-guide/css/fontawesome-all.min.css?1574476271" rel="stylesheet">
    <link href="/mongodb-guide/css/hybrid.css?1574476271" rel="stylesheet">
    <link href="/mongodb-guide/css/featherlight.min.css?1574476271" rel="stylesheet">
    <link href="/mongodb-guide/css/perfect-scrollbar.min.css?1574476271" rel="stylesheet">
    <link href="/mongodb-guide/css/auto-complete.css?1574476271" rel="stylesheet">
    <link href="/mongodb-guide/css/atom-one-dark-reasonable.css?1574476271" rel="stylesheet">
    <link href="/mongodb-guide/css/theme.css?1574476271" rel="stylesheet">
    <link href="/mongodb-guide/css/hugo-theme.css?1574476271" rel="stylesheet">
    
      <link href="/mongodb-guide/css/theme-green.css?1574476271" rel="stylesheet">
    

    <script src="/mongodb-guide/js/jquery-3.3.1.min.js?1574476271"></script>

    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/mongodb-guide/en/rw_data_guide/crud_gof/update_cmd/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://akira-kurogane.github.io/mongodb-guide/">

Akira's MongoDB Guide

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/mongodb-guide/js/lunr.min.js?1574476271"></script>
<script type="text/javascript" src="/mongodb-guide/js/auto-complete.js?1574476271"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/akira-kurogane.github.io\/mongodb-guide\/\/en";
    
</script>
<script type="text/javascript" src="/mongodb-guide/js/search.js?1574476271"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/mongodb-guide/en/guide_intro/" title="What you can do with MongoDB" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/guide_intro/">
          <b>1. </b>What you can do with MongoDB
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/mongodb-guide/en/connecting_guide/" title="Connecting to MongoDB" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/connecting_guide/">
          <b>2. </b>Connecting to MongoDB
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/connecting_guide/human_ix/" title="How to connect from your app or a terminal" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/connecting_guide/human_ix/">
          Human how-to
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/connecting_guide/human_ix/conn_string_uri/" title="Connection string URI" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/connecting_guide/human_ix/conn_string_uri/">
          Connection string URI
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/connecting_guide/human_ix/mongo_shell/" title="The mongo shell" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/connecting_guide/human_ix/mongo_shell/">
          The mongo shell
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/connecting_guide/cs_nw_details/" title="Client-Server network communication" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/connecting_guide/cs_nw_details/">
          client ⇄ TCP ⇄ db server
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/connecting_guide/cs_nw_details/drivers/" title="Drivers and &#39;the wire&#39;" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/connecting_guide/cs_nw_details/drivers/">
          Drivers and &#39;the wire&#39;
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/connecting_guide/cs_nw_details/ha_connections/" title="Automatic failover" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/connecting_guide/cs_nw_details/ha_connections/">
          Automatic failover
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/mongodb-guide/en/rw_data_guide/" title="Reading and writing" class="dd-item 
        parent
        
        
        ">
      <a href="/mongodb-guide/en/rw_data_guide/">
          <b>3. </b>Reading and writing
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/rw_data_guide/mql_vs_sql/" title="&#39;MQL&#39; vs. SQL" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/rw_data_guide/mql_vs_sql/">
          &#39;MQL&#39; vs. SQL
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/rw_data_guide/bulk_writes/" title="Bulk writes API" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/rw_data_guide/bulk_writes/">
          Bulk writes API
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/rw_data_guide/bson_format/" title="The data: BSON documents" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/rw_data_guide/bson_format/">
          The data: BSON documents
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/rw_data_guide/crud_gof/" title="Queries, Inserts, Updates and Deletes" class="dd-item 
        parent
        
        
        ">
      <a href="/mongodb-guide/en/rw_data_guide/crud_gof/">
          The CRUD G.o.F.
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/rw_data_guide/crud_gof/find_cmd/" title="The find command" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/rw_data_guide/crud_gof/find_cmd/">
          find
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/rw_data_guide/crud_gof/insert_cmd/" title="The insert command" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/rw_data_guide/crud_gof/insert_cmd/">
          insert
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/rw_data_guide/crud_gof/update_cmd/" title="The update command" class="dd-item 
        parent
        active
        
        ">
      <a href="/mongodb-guide/en/rw_data_guide/crud_gof/update_cmd/">
          update
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/rw_data_guide/crud_gof/delete_cmd/" title="The delete command" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/rw_data_guide/crud_gof/delete_cmd/">
          delete
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/rw_data_guide/aggregation_pipeline/" title="Aggregation Pipeline" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/rw_data_guide/aggregation_pipeline/">
          Aggregation Pipeline
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/rw_data_guide/imp_exp_utilities/" title="Import and export utilities" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/rw_data_guide/imp_exp_utilities/">
          Import and export utilities
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/mongodb-guide/en/stability_guide/" title="Making MongoDB stable" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/stability_guide/">
          <b>4. </b>Making MongoDB stable
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/stability_guide/the_replicaset/" title="Replica sets" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/stability_guide/the_replicaset/">
          Replica sets
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/stability_guide/the_replicaset/config_and_status/" title="Replica set configuration and status" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/stability_guide/the_replicaset/config_and_status/">
          Conf &amp; status
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/stability_guide/the_replicaset/elections/" title="Replica set elections" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/stability_guide/the_replicaset/elections/">
          Elections
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/stability_guide/oplog_replication/" title="MongoDB Oplog" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/stability_guide/oplog_replication/">
          MongoDB Oplog
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/stability_guide/driver_failover/" title="Driver automatic failover" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/stability_guide/driver_failover/">
          Driver automatic failover
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/stability_guide/write_and_read_concern/" title="Read and Write concern" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/stability_guide/write_and_read_concern/">
          Read and Write concern
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/stability_guide/backup_choices/" title="Backup choices" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/stability_guide/backup_choices/">
          Backup choices
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/stability_guide/restore/" title="Restoring backups" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/stability_guide/restore/">
          Restoring backups
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/stability_guide/performance/" title="Performance stability" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/stability_guide/performance/">
          Performance stability
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/mongodb-guide/en/expansion_guide/" title="Making MongoDB bigger" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/expansion_guide/">
          <b>5. </b>Making MongoDB bigger
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/expansion_guide/active_dataset_concept/" title="Active dataset - Key concept" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/expansion_guide/active_dataset_concept/">
          Active dataset - Key concept
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/expansion_guide/hardware_increase/" title="Hardware - the simple answer" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/expansion_guide/hardware_increase/">
          Hardware - the simple answer
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/expansion_guide/sharding/" title="Sharding for expansion" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/expansion_guide/sharding/">
          Sharding for expansion
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/mongodb-guide/en/perf_guide/" title="Making MongoDB fast" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/perf_guide/">
          <b>6. </b>Making MongoDB fast
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/perf_guide/plan_optimization/" title="Improving your queries, updates and aggregations" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/perf_guide/plan_optimization/">
          Improving your queries, updates and aggregations
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/perf_guide/hardware_upgrade/" title="Provisioning more and/or better hardware" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/perf_guide/hardware_upgrade/">
          Provisioning more and/or better hardware
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/perf_guide/shard_big_collections/" title="Shard your biggest datasets" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/perf_guide/shard_big_collections/">
          Shard your biggest datasets
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/mongodb-guide/en/secure_guide/" title="Making MongoDB secure" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/secure_guide/">
          <b>7. </b>Making MongoDB secure
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/secure_guide/authentication/" title="Enabling authentication" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/secure_guide/authentication/">
          Enabling authentication
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/secure_guide/access_control/" title="Access control (a.k.a. Authorization)" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/secure_guide/access_control/">
          Access control (a.k.a. Authorization)
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/secure_guide/network_encryption/" title="Network encryption" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/secure_guide/network_encryption/">
          Network encryption
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/secure_guide/storage_encryption/" title="Storage encryption" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/secure_guide/storage_encryption/">
          Storage encryption
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/secure_guide/non_mongodb_hardening/" title="Other &#39;hardening&#39;" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/secure_guide/non_mongodb_hardening/">
          Other &#39;hardening&#39;
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/secure_guide/auditing/" title="Auditing" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/secure_guide/auditing/">
          Auditing
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/mongodb-guide/en/monitoring_guide/" title="MongoDB Diagnosis" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/monitoring_guide/">
          <b>8. </b>MongoDB Diagnosis
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/monitoring_guide/serverstatus/" title="serverStatus command" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/monitoring_guide/serverstatus/">
          serverStatus command
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/monitoring_guide/cloud_metrics/" title="Cloud metrics" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/monitoring_guide/cloud_metrics/">
          Cloud metrics
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/monitoring_guide/cloud_alerts/" title="Cloud alerts" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/monitoring_guide/cloud_alerts/">
          Cloud alerts
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/monitoring_guide/third_party_systems/" title="Third party systems" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/monitoring_guide/third_party_systems/">
          Third party systems
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/mongodb-guide/en/monitoring_guide/currentop/" title="db.currentOp()" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/monitoring_guide/currentop/">
          db.currentOp()
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/mongodb-guide/en/docs_guide/" title="Read the docs" class="dd-item 
        
        
        
        ">
      <a href="/mongodb-guide/en/docs_guide/">
          <b>9. </b>Read the docs
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/akira-kurogane/mongodb-guide"><i class='fa fa-fw fa-github'></i> Github repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://akira-kurogane.github.io/en/mongodb-guide/credits"><i class='fa fa-fw fa-bullhorn'></i> Theme credits</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="https://akira-kurogane.github.io/mongodb-guide/en/rw_data_guide/crud_gof/update_cmd/" selected>English</option>
                    
                  
              
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <center>

    Github repo: 
    
    <a class="github-button" href="https://github.com/akira-kurogane/mongodb-guide" data-icon="octicon-star" data-show-count="false" aria-label="Star Akira's MongoDB Guide on GitHub">Star</a>

    
    <a class="github-button" href="https://github.com/akira-kurogane/mongodb-guide/fork" data-icon="octicon-repo-forked" data-show-count="false" aria-label="Fork Akira's MongoDB Guide on GitHub">Fork</a>

</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/mongodb-guide/en/'>Top page</a> > <a href='/mongodb-guide/en/rw_data_guide/'>Reading and writing</a> > <a href='/mongodb-guide/en/rw_data_guide/crud_gof/'>Queries, Inserts, Updates and Deletes</a> > The update command
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#query-filter">Query filter</a></li>
<li><a href="#object-modification-spec">Object modification spec</a></li>
<li><a href="#multi-upsert-collation">Multi, Upsert, Collation</a></li>
<li><a href="#ordered-batch-writes-writeconcern-document-validation">Ordered batch writes, writeConcern, document validation</a></li>
</ul></li>
<li><a href="#performance">Performance</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              The update command
            </h1>
          

        




	

<p>In any database I can think of an update has two fundamental pieces of work to do &ndash; a query to find the matching documents' place in the underlying storage, and the write modification that is done upon them.</p>

<p>Accordingly the query filter and the object modification spec object are the two compulsory but separate arguments of a MongoDB <tt>update</tt> command. An example as mongo shell function:</p>

<pre><code class="language-json">db.cc_status_collection.update(
  { /* query filter: */
    &quot;client_code&quot;: &quot;R8THH&quot;,
    &quot;expiry&quot;: {&quot;$exists&quot;: false }
  },
  { /* update spec: */
    &quot;$set&quot;: { &quot;expiry&quot;: ISODate(&quot;2019-08-31T00:00Z&quot;), &quot;plevel&quot;: 0 },
    &quot;$unset&quot;: {&quot;active_contacts&quot;: &quot;&quot; },
    &quot;$inc&quot;: { &quot;admin_op_transaction_count&quot;: 1 }
  }
  /* (other option fields exist; not used in this example) */
)
</code></pre>

<h4 id="query-filter">Query filter</h4>

<p>The update command's query filter (a.k.a. predicate) is exactly the same as the find command's.</p>

<p>Just as with find it can be an empty object &ndash; this means match any/all documents, as with a find command. Whether it matches just one or all depends on the &quot;multi&quot; flag discussed in the other options subsection below. find's equivalent is the &quot;limit&quot; option which can be any number, but update's multi is a boolean - 1 or all, no inbetween. N.b. options are not part of query filter or the object modification spec; they are set to the side of those two.</p>

<h4 id="object-modification-spec">Object modification spec</h4>

<p>The object modification spec cannot simply be the new object, or just some key-value pairs within it, in verbatim key-value pairs like the document given to an insert command. It must be a set of <strong>update operators</strong> which will objects that specify the target fields and the new value or increment amount or array modifications etc. that will be performed on them.</p>

<p>Hence rather than supplying just: <tt>&quot;expiry&quot;: ISODate(&quot;2019-08-31T00:00Z&quot;)</tt></p>

<p>You must have a $set operation: <tt>&quot;$set&quot;: { &quot;expiry&quot;: ISODate(&quot;2019-08-31T00:00Z&quot;), ... }</tt></p>

<p>$set is the most fundamental <a href="https://docs.mongodb.com/manual/reference/operator/update/">update operator</a> but it is only one of many:</p>

<ul>
<li>Approximately a dozen operators for updating scalar value fields.</li>
<li>Approximately half a dozen operators for modifying nested arrays.</li>
<li>Three 'operators' that provide a syntax for access specific values in nested arrays (<tt>$,</tt> <tt>$[]</tt>, <tt>$[&lt;identifier&gt;]</tt>).</li>
</ul>

<p>And there are about half a dozen operator <em>modifiers</em> (eg. $each, $sort). Documentation note: the modifiers are confusingly shown in the MongoDB document navigation list as operators, at least as of Aug 2019.</p>

<p>Update operators are statements - you are instructing what to do with a field (or list of fields) with a mini-command, you might say.</p>

<pre><code class="language-json">    &quot;$set&quot;: { &quot;expiry&quot;: ISODate(&quot;2019-08-31T00:00Z&quot;), &quot;plevel&quot;: 0 },
</code></pre>

<p>Nearly every operator can iterate through a list of fields, doing the same thing for each. The &quot;$set&quot; operation above shows how that syntax works with two fields but it could be hundreds or thousands probably. Only $bit is an exception I believe &ndash; if you needed to do it for multiple fields and a <tt>{ &quot;$bit&quot;: ... }</tt> operation for each in the object modification spec.</p>

<p>There is no operator that will iterate all fields, or all fields matching a regex. The array reference operators provide some ways to iterate/find values regardless of which array index they are at, but as for key-value pairs you must supply the exact key names when you submit the update request.</p>

<p>In summary: the object modification spec is a sequentially-executed list of operations, each with a list of fields that will be modified, that will transform a copy of the old document to the new one.</p>

<h4 id="multi-upsert-collation">Multi, Upsert, Collation</h4>

<p>For every update there is a <tt>multi</tt>, <tt>upsert</tt> and <tt>collation</tt> option. This means that in a bulk updates you can mix and match these modes for each update separately.</p>

<p><strong>multi</strong></p>

<p>In short, if you were to use updateOne(...) in the mongo shell (or whatever driver API's equivalent) <tt>multi</tt> will be <tt>false</tt>. If you use updateMany(...) it will be <tt>true</tt>. If you use the legacy <em>update(...)</em> that existed before there were the new ...One() / ...Many() variants it will be <strong>false</strong>. I.e. if you leave the multi option unset the update commands only affects one (or zero) documents.</p>

<p><strong>upsert</strong></p>

<p>From the documentation: <em>&quot;Optional. If true, perform an insert if no documents match the query.&quot;</em></p>

<p>If an upsert applies (i.e. no existing documents matched that query) the multi value has no relevance - one document will be inserted.</p>

<p>The way to tell if you command created a new document or not is to look in the &quot;upserted&quot; nested array that is returned. It will contain the _id value of the new document. If you have multiple updates in a single <tt>{&quot;update&quot;: ..., &quot;updates&quot;: [ ... ], ... }</tt> request you'll need to do matching to the original request to determine which ones exactly became upserts and which didn't. This is low-level (or at least semi-low) detail though. Possibly your driver does this automatically and you can access the original updates vs. new upsert _id idiomatically.</p>

<h4 id="ordered-batch-writes-writeconcern-document-validation">Ordered batch writes, writeConcern, document validation</h4>

<p>The &quot;ordered&quot;, &quot;writeConcern&quot; and &quot;bypassDocumentValidation&quot; options are set at the same level as the array and hence apply to all the updates, if there are more than one. See batch writes for more information regarding &quot;ordered&quot;.</p>

<h3 id="performance">Performance</h3>

<p>As with a find command you should be sure there is an index that makes the query part efficient. There is no way (or need) to make the update part more efficient - once the real address to the document(s) is found the same amount of work is going to be performed.</p>

<p>The objection modification work might seem to be the bigger part of the work - it is usually the harder of the two main arguments to write, and it seems the software must take many more steps to execute than the query part.</p>

<p>The work to modify the BSON object is usually less time-consuming than the query part, however. Thousands of CPU steps can be performed faster in first-level cache than even one out-of-cache memory access to get a part of the storage engine's data structure (e.g. the next B-tree node) and that will probably be repeated several times before the existing document is fully accessed. And that's with a perfect index - think how high the cost will be if you have to document-scan <em>N</em> documents before finding the one to update.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/mongodb-guide/en/rw_data_guide/crud_gof/insert_cmd/" title="The insert command"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/mongodb-guide/en/rw_data_guide/crud_gof/delete_cmd/" title="The delete command" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/mongodb-guide/js/clipboard.min.js?1574476271"></script>
    <script src="/mongodb-guide/js/perfect-scrollbar.min.js?1574476271"></script>
    <script src="/mongodb-guide/js/perfect-scrollbar.jquery.min.js?1574476271"></script>
    <script src="/mongodb-guide/js/jquery.sticky.js?1574476271"></script>
    <script src="/mongodb-guide/js/featherlight.min.js?1574476271"></script>
    <script src="/mongodb-guide/js/html5shiv-printshiv.min.js?1574476271"></script>
    <script src="/mongodb-guide/js/highlight.pack.js?1574476271"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/mongodb-guide/js/modernizr.custom-3.6.0.js?1574476271"></script>
    <script src="/mongodb-guide/js/learn.js?1574476271"></script>
    <script src="/mongodb-guide/js/hugo-learn.js?1574476271"></script>

    <link href="/mongodb-guide/mermaid/mermaid.css?1574476271" type="text/css" rel="stylesheet" />
    <script src="/mongodb-guide/mermaid/mermaid.js?1574476271"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-105947713-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
